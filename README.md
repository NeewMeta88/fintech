
# üè¶ Bank API

RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ —Å—á–µ—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –º–µ–∂–¥—É –Ω–∏–º–∏. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

## ‚öôÔ∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Python 3.10+
- Django 4.x + DRF
- PostgreSQL
- Kafka (Apache Kafka) ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
- Docker + docker-compose
- JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/your-user/bank-api.git
cd fintech
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:

```
SECRET_KEY=your-secret-key
DEBUG=True
POSTGRES_DB=bank_db
POSTGRES_USER=bank_user
POSTGRES_PASSWORD=bank_pass

KAFKA_KRAFT_MODE=true
KAFKA_CFG_PROCESS_ROLES=broker,controller
KAFKA_CFG_NODE_ID=1
KAFKA_CFG_CONTROLLER_LISTENER_NAMES=CONTROLLER
KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT
KAFKA_CFG_LISTENERS=PLAINTEXT://:9092,CONTROLLER://:9093
KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092
KAFKA_CFG_CONTROLLER_QUORUM_VOTERS=1@kafka:9093
ALLOW_PLAINTEXT_LISTENER=yes
```

## üóÉÔ∏è –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
docker-compose exec web python manage.py migrate
```

–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è:
- —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `admin` (–ø–∞—Ä–æ–ª—å: `admin`)
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `test` (–ø–∞—Ä–æ–ª—å: `test`)
- 3 —Å—á—ë—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `admin`
- 1 —Å—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `test`

---

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
docker-compose up --build
```

–ü—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8000](http://localhost:8000)  
–ò–º–µ–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å api

---

## üß™ –¢–µ—Å—Ç—ã

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
docker-compose exec web python manage.py test app/
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üìö API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥  | URL                                        | –û–ø–∏—Å–∞–Ω–∏–µ                                           | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| ------ | ------------------------------------------ | ---------------------------------------------------- |----------------|
| GET    | `/api/accounts/`                           | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è               | ‚úÖ –î–∞           |
| POST   | `/api/accounts/`                           | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—á—ë—Ç–∞                                | ‚úÖ –î–∞           |
| DELETE | `/api/accounts/{id}/`                      | –£–¥–∞–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞ (–µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å = 0)                     | ‚úÖ –î–∞           |
| GET    | `/api/accounts/detail/{uuid}/`             | –û—Ç–∫—Ä—ã—Ç–∏–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¥–µ—Ç–∞–ª—è–º–∏ —Å—á—ë—Ç–∞              | ‚úÖ –î–∞           |
| GET    | `/api/accounts/all`                        | –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) | ‚úÖ –î–∞           |
| GET    | `/api/transactions/list/`                  | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è    | ‚úÖ –î–∞           |
| POST   | `/api/transactions/create/`                | –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                                  | ‚úÖ –î–∞           |
| GET    | `/api/transactions/open-transaction-form/` | HTML-—Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                       | ‚úÖ –î–∞           |
| POST   | `/api/token/`                              | –ü–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞                                 | ‚ùå –ù–µ—Ç          |
| GET    | `/register/`                               | –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                    | ‚ùå –ù–µ—Ç          |
| POST   | `/register/`                               | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                      | ‚ùå –ù–µ—Ç          |
| GET    | `/`                                        | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ (–ª–æ–≥–∏–Ω)                               | ‚ùå –ù–µ—Ç          |
| POST   | `/`                                        | –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                                    | ‚ùå –ù–µ—Ç          |
| GET    | `/dashboard/`                              | –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                       | ‚úÖ –î–∞           |
| GET    | `/logout/`                                 | –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                                   | ‚úÖ –î–∞           |

---

## üí° –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

- –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–∞–º–æ–º—É —Å–µ–±–µ (–Ω–∞ —Ç–æ—Ç –∂–µ —Å—á–µ—Ç)
- –°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å ‚Äî –æ—à–∏–±–∫–∞
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–æ–±—ã—Ç–∏–µ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Kafka (—Ç–æ–ø–∏–∫ `transactions`)

---

## üí¨ Kafka

–ö–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Kafka-—Ç–æ–ø–∏–∫ `transactions`:

```json
{
  "id": "uuid",
  "from_account": "uuid",
  "to_account": "uuid",
  "amount": 500.00,
  "created_at": "2025-07-15T12:00:00Z"
}
```

Kafka –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–∞–≤–µ `docker-compose`.

---

## üìú –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–¥–æ–ø —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)

–≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/transactions/list/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω—ã –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–ª—É—á–µ–Ω–∏–µ/–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤).

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –æ–Ω–∏ –≤–∏–¥—è—Ç, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –Ω–∞ –∏—Ö —Å—á–µ—Ç–∞—Ö.

---

## üìé –ü—Ä–∏–º–µ—Ä—ã curl

**üîê –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω (JWT)**

```bash
curl -X POST http://localhost:8000/api/token/ \
-H "Content-Type: application/json" \
-d '{"username": "your_username", "password": "your_password"}'
```

**üè¶ –°–æ–∑–¥–∞—Ç—å —Å—á—ë—Ç**

```bash
curl -X POST http://localhost:8000/api/accounts/ \
-H "Authorization: Bearer <token>" \
-H "Content-Type: application/json" \
-d '{}'
```
‚ö†Ô∏è `owner_name` –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è ‚Äî –æ–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∫ username(index).

**üí∏ –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏**

```bash
curl -X POST http://localhost:8000/api/transactions/create/ \
-H "Authorization: Bearer <token>" \
-H "Content-Type: application/json" \
-d '{
  "from_account": "<UUID_–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è>",
  "to_account": "<UUID_–ø–æ–ª—É—á–∞—Ç–µ–ª—è>",
  "amount": 100.0
}'
```

**üîÅ –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–≤–æ–¥–æ–≤**

```bash
curl -X GET http://localhost:8000/api/transactions/list/ \
-H "Authorization: Bearer <token>"
```

**üìÇ –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö —Å—á–µ—Ç–æ–≤**

```bash
curl -X GET http://localhost:8000/api/accounts/ \
-H "Authorization: Bearer <token>"
```

**üóë –£–¥–∞–ª–∏—Ç—å —Å—á—ë—Ç (–µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å = 0)**

```bash
curl -X DELETE http://localhost:8000/api/accounts/<UUID>/ \
-H "Authorization: Bearer <token>"
```

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

–†–æ–¥–∏–æ–Ω–æ–≤ –ï–≥–æ—Ä –ú–∏—Ö–∞–π–ª–æ–≤–∏—á
